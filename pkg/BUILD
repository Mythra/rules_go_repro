load("@io_bazel_rules_go//go:def.bzl", "go_library", "go_source", "go_test")
load("//pkg:macro.bzl", "gg_test")

go_library(
  name = 'go_lib',
  importpath = 'github.com/Mythra/rules_go_repro/embed/pkg',
  srcs = glob(['*.go'], exclude=['*_test.go']),
  embed = [],
  cgo = True,
  visibility = ['//visibility:public'],
)

# This is being generated, automatically by a repository rule.
# so individiual rules don't have to list their deps manually.
go_source(
  name = 'autogenerated',
  deps = [':go_lib'],
  visibility = ["//visibility:public"],
)

gg_test()